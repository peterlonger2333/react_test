<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no">
    <title>comp3334nft</title>
    <link rel="stylesheet" href="assets/bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Raleway:100,100i,200,200i,300,300i,400,400i,500,500i,600,600i,700,700i,800,800i,900,900i">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lora:400,400i,700,700i">
    <link rel="stylesheet" href="assets/fonts/fontawesome-all.min.css">
    <link rel="stylesheet" href="assets/fonts/font-awesome.min.css">
    <link rel="stylesheet" href="assets/fonts/simple-line-icons.min.css">
    <link rel="stylesheet" href="assets/fonts/fontawesome5-overrides.min.css">
    <link rel="stylesheet" href="assets/css/card-3-column-animation-shadows-images.css">
    <link rel="stylesheet" href="assets/css/CCS-RecordForm.css">
    <link rel="stylesheet" href="assets/css/Drag-and-Drop-Multiple-File-Form-Input-upload-Advanced.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.5.2/animate.min.css">
    <link rel="stylesheet" href="assets/css/Ludens-Users---3-Profile.css">
    <link rel="stylesheet" href="assets/css/some-message.css">
    <link rel="stylesheet" href="assets/css/untitled.css">
</head>

<body>
    <h1 class="text-center text-white d-none d-lg-block site-heading"><span style="font-size: 40px;color: var(--bs-white);"><br>&nbsp; &nbsp; &nbsp; &nbsp;NFT -Share your creative artwork !<br></span></h1>
    <nav class="navbar navbar-dark navbar-expand-lg bg-dark py-lg-4" id="mainNav">
        <div class="container">
            <div class="collapse navbar-collapse" id="navbarResponsive-1">
                <ul class="navbar-nav mx-auto">
                    <li class="nav-item"><a class="nav-link" href="index.html">Home</a></li>
                    <li class="nav-item"><a class="nav-link" href="swap.html">swap</a></li>
                    <li class="nav-item"><a class="nav-link" href="browse.html">browse</a></li>
                    <li class="nav-item"><a class="nav-link" href="me.html">me</a></li>
                    <li class="nav-item"><a class="nav-link" href="about.html">about</a></li>
                    <li class="nav-item"><a class="nav-link" href="upload.html">upload</a></li>
                </ul>
            </div>
        </div>
    </nav>
    <div class="m-5">
        <div id="backdrop" class="backdrop backdrop-transition backdrop-dark">
            <div class="text-center w-100" style="position: absolute;top: 50%;">
                <div class="bg-light border rounded border-success shadow-lg m-auto" style="width: 150px;height: 150px;"><i class="fa fa-upload d-block p-4" style="font-size: 50px;"></i><span>Drop file to attach</span></div>
            </div>
        </div>
        <div class="bg-light border rounded border-light pt-1 jumbotron py-5 px-4">
            <div class="alert alert-success invisible mt-5" role="alert"><span id="notify"></span></div>
            <h1>File Drop<br></h1>
            <p><label class="form-label" for="form-files"><a class="btn btn-secondary btn-sm" role="button">Choose Files</a></label>&nbsp<br></p>
            <p>Description:</p><input type="text" id="description">
            <p id="filecount"><br></p>
            <div id="list"></div>
            <form action="" enctype="multipart/form-data"><input class="form-control invisible" type="file" id="form-files" name="files" multiple="multiple" accept="image/png, image/jpeg, image/gif, image/jpg"><button class="btn btn-outline-primary d-block w-100" type="submit" onclick="submitImg()">Submit</button><button class="btn btn-danger mt-5" type="reset" onclick="clearFiles()">Reset</button></form>
        </div>
        <div class="text-center bg-light border rounded border-dark shadow-lg p-3"><img id="image_preview" width="100">
            <div><button class="btn btn-warning btn-sm m-3" onclick="previewClose()">Close</button></div>
        </div>
    </div>
    <script src="assets/bootstrap/js/bootstrap.min.js"></script>
    <script src="assets/js/bs-init.js"></script>
    <script src="assets/js/current-day.js"></script>
    <script src="assets/js/Drag-and-Drop-Multiple-File-Form-Input-upload-Advanced.js"></script>
    <script>
        function upload()
        {
            var up_file = $('#form-files').files[0];//找到id为file的组件，当然这里是input组件
            var description = $('#description');
            var formData = new FormData();//新建一个formdata用于存储数据
            formData.append("up_file",up_file);//将选择的文件添加到formdata中
            formData.append("description",description);
             $("#upload").html(target)
            $.ajax
            ({
                url:'http://127.0.0.1:5000/upload',
                dataType:'json',
                type:'POST',
                async: true,
                data: formData,
                processData : false, // 使数据不做处理
                contentType : false, // 不要设置Content-Type请求头
                success: function(data) {
                    var params = JSON.parse(data)
                    $("#img").attr("src", params);
                },
            });
        }
    </script>
</body>

</html>